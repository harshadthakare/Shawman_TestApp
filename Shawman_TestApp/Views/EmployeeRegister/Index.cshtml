@model Shawman_TestApp.Models.EmployeeModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

}
@using (Html.BeginForm("Index", "EmployeeRegister", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Add New Employee</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.DateOfBirth, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.DateOfBirth, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.DateOfBirth, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.MobileNo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.MobileNo, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.MobileNo, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Designation, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownListFor(m => m.DesignationId, new SelectList(Model.designationModels, "Id", "Name"), "Choose Designation", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.DesignationId, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" name="submit" value="submit" class="btn btn-default" />
            </div>
        </div>
    </div>
}

@*@using (Html.BeginForm("SaveData", "EmployeeRegister", FormMethod.Post))
{
    <table>
        <tr>
            <td>
                Name
            </td>
            <td>
                @Html.TextBoxFor(u => u.Name)

            </td>
        </tr>
        <tr>
            <td>
                Date Of Birth
            </td>
            <td>
                @Html.TextBoxFor(u => u.DateOfBirth)
            </td>
        <tr>
            <td>
                Email
            </td>
            <td>
                @Html.TextBoxFor(u => u.Email)
            </td>
        <tr>
            <td>
                Mobile No
            </td>
            <td>
                @Html.TextBoxFor(u => u.MobileNo)
            </td>
        <tr>
            <td>
                Department
            </td>
            <td>
                @Html.DropDownListFor(m => m.DesignationId, new SelectList(Model.designationModels, "Id", "Name"), "Choose Designation", new { @class = "form-control" })

            </td>
        </tr>
        <tr>
            <td>
                <input type="submit" name="submit" value="Save" />
            </td>

        </tr>
    </table>
}*@

<div id="dvShow"></div>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script>

    /* we have ajax call for calling GetDetails which will return html data in vHtml variable */
    $(document).ready(function () {
        //getDDLDetails();
        getDetails();
    });


    //function getDDLDetails() {
    //    $.ajax({
    //        url: "/EmployeeRegister/GetDDLDetails",
    //        type: "get",

    //        success: function (data) {
    //            var html = "";
    //            $.each(data, function (i, v) {
    //                html = html + "<option id=" + v.Id + ">" + v.Name + "</option>";

    //            });
    //            $("#departList").append(html);
    //        }
    //    });
    //}

    function getDetails() {
        $.ajax({
            url: "/EmployeeRegister/GetDetails",
            type: "get",

            success: function (vHtml) {
                $("#dvShow").html("");
                $("#dvShow").html(vHtml);
            }
        });
    }
</script>




